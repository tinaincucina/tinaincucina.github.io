function wpcShareCommentFB(e,s){FB.ui({method:"share",href:e,quote:s},function(e){})}(!parseInt(wpdiscuzAjaxObj.fbUseOAuth2)&&parseInt(wpdiscuzAjaxObj.enableFbLogin)||parseInt(wpdiscuzAjaxObj.enableFbShare))&&wpdiscuzAjaxObj.facebookAppID&&(function(e,s,n){var a,o=e.getElementsByTagName(s)[0];!e.getElementById(n)&&((a=e.createElement(s)).id=n,a.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:wpdiscuzAjaxObj.facebookAppID,cookie:!0,xfbml:!0,version:"v7.0"})}),jQuery(document).ready(function(e){(s=Cookies.get("wpdiscuz_social_login_message"))&&"undefined"!==s&&(Cookies.remove("wpdiscuz_social_login_message"),wpdiscuzAjaxObj.setCommentMessage(decodeURIComponent(s.replace(/\+/g,"%20")),"error")),Cookies.get("wpdiscuz_scroll_to_comments")&&(Cookies.remove("wpdiscuz_scroll_to_comments",{path:"/"}),e("html, body").animate({scrollTop:e("#comments").offset().top-32},1e3)),e("body").on("click",".wpd-comment-share .fa-facebook-f",function(){if(1==wpdiscuzAjaxObj.enableFbShare){var s=e(this).parents(".wpd-comment").find(".wpd-comment-right").attr("id"),n=window.location.href;-1!==n.indexOf("#")&&(n=n.substring(0,n.indexOf("#"))),wpcShareCommentFB(n+="#"+s,e(this).parents(".wpd-comment-right").find(".wpd-comment-text").text())}});var s,n="";function a(e,s){var n,a="";t(s,1),Cookies.set("wpdiscuz_scroll_to_comments",1,{path:"/"}),"facebook"===e&&0==wpdiscuzAjaxObj.facebookUseOAuth2?FB.getLoginStatus(function(t){"connected"===t.status?o(e,n=t.authResponse.accessToken,a=t.authResponse.userID,s):FB.login(function(t){"connected"===t.status&&o(e,n=t.authResponse.accessToken,a=t.authResponse.userID,s)},{scope:"public_profile,email"})}):o(e,n,a,s)}function o(s,n,a,o){return e.ajax({type:"POST",url:wpdiscuzAjaxObj.url,data:{action:"wpd_social_login",provider:s,token:n,userID:a,postID:wpdiscuzAjaxObj.wc_post_id}}).done(function(s){(function s(n,a){try{var o=e.parseJSON(n),i=o.code,r=o.message,c=o.url;200===parseInt(i)?location.assign(c):wpdiscuzAjaxObj.setCommentMessage(r,"error")}catch(d){console.log(d)}t(a,0)})(s,o)}),""}function t(e,s){1===s?e.find(".wpdiscuz-social-login-spinner").show():e.find(".wpdiscuz-social-login-spinner").hide()}e("body").on("click","#wpdcom .wpd-social-login .wpdiscuz-login-button",function(){var s,o,t,i,r=e(this).parents(".wpd-social-login");t=n=(s=e(this),o="",s.hasClass("wpdsn-fb")&&(o="facebook"),s.hasClass("wpdsn-insta")&&(o="instagram"),s.hasClass("wpdsn-gg")&&(o="google"),s.hasClass("wpdsn-ds")&&(o="disqus"),s.hasClass("wpdsn-wp")&&(o="wordpress"),s.hasClass("wpdsn-tw")&&(o="twitter"),s.hasClass("wpdsn-vk")&&(o="vk"),s.hasClass("wpdsn-ok")&&(o="ok"),s.hasClass("wpdsn-linked")&&(o="linkedin"),s.hasClass("wpdsn-yandex")&&(o="yandex"),s.hasClass("wpdsn-mailru")&&(o="mailru"),s.hasClass("wpdsn-weixin")&&(o="wechat"),s.hasClass("wpdsn-weibo")&&(o="weibo"),s.hasClass("wpdsn-qq")&&(o="qq"),s.hasClass("wpdsn-baidu")&&(o="baidu"),s.hasClass("wpdsn-telegram")&&(o="telegram"),o),i=r,1!=parseInt(wpdiscuzAjaxObj.socialLoginAgreementCheckbox)||1==Cookies.get("socialLoginAgreementConfirmed")?a(t,i):i.parents(".wpd-form-wrap, .wpd-form").find(".wpd-social-login-agreement").first().slideDown(700)}),e("body").on("click","#wpdcom .wpd-agreement-buttons-right .wpd-agreement-button",function(){var s=e(this).parents(".wpd-form-wrap, .wpd-form").find(".wpd-social-login-agreement").slideUp(700);e(this).hasClass("wpd-agreement-button-agree")&&(wpdiscuzAjaxObj.isCookiesEnabled&&Cookies.set("socialLoginAgreementConfirmed",1,{expires:30,path:"/"}),a(n,s))});var i=function e(){var s,n="",a=/[#\?\&]tgAuthResult=([A-Za-z0-9\-_=]*)$/;try{if(s=(n=location.hash.toString()).match(a)){location.hash=n.replace(a,"");var o=s[1]||"",t=(o=o.replace(/-/g,"+").replace(/_/g,"/")).length%4;return t>1&&(o+=Array(5-t).join("=")),JSON.parse(window.atob(o))}}catch(i){console.log(i)}return!1}();i&&(e("#wpdiscuz-loading-bar").show(),e.ajax({type:"POST",url:wpdiscuzAjaxObj.url,data:{action:"wpd_login_callback",provider:"telegram",user:i}}).done(function(s){console.log(s),s.success?location.reload(!0):(wpdiscuzAjaxObj.setCommentMessage(s.data,"error"),e("#wpdiscuz-loading-bar").fadeOut(250))}).fail(function(s,n,a){console.log(a),e("#wpdiscuz-loading-bar").fadeOut(250)}))});